<h1>Student Submissions</h1>

<% if @is_student%>
  <div id="subm-show-content">
    <table class = "w">
      <thead >
        <tr>
          <th>Course</th>
          <th>Assignment</th>
          <th>Due Date</th>
          <th>Status</th>
          <th>Submission</th>
        </tr>
      </thead>
    
      <% if (@submissions != nil) %>
          <tr>
             <% @courses.each do |course| %>
             <td id= "course_name_num"><%= course.name + (" ") + course.number.to_s %></td>
          </tr>
              <% @assignments.each do |assignment| %>
               <% assignment.submissions.each do |submission| %>
                  <tr>
                    <td id="remove_border_line"></td>
                    <td><%= assignment.name %></td>
                    <td><%= assignment.due_date %></td>
                    <td id="ontime">Ontime</td>
                    <td><%= link_to submission.name , submission.attachment_url %></td>
                  </tr>
                <% end %>
              <% end %>
          <% end %>
      <% end %>
    </table>
  
    <div style="text-align:center;">  
      <%= link_to 'Back', :back %> &emsp;
      <%= link_to 'Home', root_path %> 
    </div>
  
  </div>
<% end %>

<% if @is_instructor%>
<div id="subm-show-content">
  <table class = "w">
    <thead >
      <tr>
        <th>Course</th>
        <th>Student Name</th>
        <th>Assignment</th>
        <th>Due Date</th>
        <th>Status</th>
        <th>Submission</th>
      </tr>
    </thead>
  
    <% if (@submissions != nil) %>
        <tr>
           <% @courses.each do |course| %>
           <td id= "course_name_num"><%= course.name + (" ") + course.number.to_s %></td>
        </tr>
            <% @assignments.each do |assignment| %>
             <% assignment.submissions.each do |submission| %>
                <tr>
                  <td id="remove_border_line"></td>
                  <td><%= Student.find_by(id: submission.student_id).first_name %> <%= Student.find_by(id: submission.student_id).last_name %> </td>
                  <td><%= assignment.name %></td>
                  <td><%= assignment.due_date %></td>
                  <td id="ontime">Ontime</td>
                  <td><%= link_to submission.name , submission.attachment_url %></td>
                </tr>
              <% end %>
            <% end %>
        <% end %>
    <% end %>
</table>

<div style="text-align:center;">  
  <%= link_to 'Back', :back %> &emsp;
  <%= link_to 'Home', root_path %> 
</div>
</div>
<% end %>