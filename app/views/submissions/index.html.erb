<<<<<<< HEAD
<h1>Student Submissions</h1>
=======
>>>>>>> bc25326f78611721b85f452914e028087fc1c6f9

<% if student_signed_in?%>
  <h1 style="text-align:center">View My Submissions</h1>
  <div id="subm-show-content">
  <table style = "width: 80%">
      <thead>
        <tr>
          <th>Course</th>
          <th>Assignment</th>
          <th>Due Date</th>
          <th>Submitted Date</th>
          <th>Status</th>
          <th>Submission</th>
        </tr>
      </thead>
    
      <% if (@submissions != nil) %>
          <tr>
             <% @courses.each do |course| %>
             <td id= "course_name_num"><%= course.name + (" ") + course.number.to_s %></td>
             <td id="remove_border_line"></td>
             <td id="remove_border_line"></td>
             <td id="remove_border_line"></td>
             <td id="remove_border_line"></td>
             <td id="remove_border_line"></td>
          </tr>
              <% course.assignments.each do |assignment| %>
               <% assignment.submissions.each do |submission| %>
                 <% if (submission.student.email == current_student.email  )%>
                  <tr>
                    <td id="remove_border_line"></td>
                    <td><%= assignment.name %></td>
              
                    <td><%= DateTime.parse(assignment.due_date).strftime("%a, %m/%d/%Y at %I:%M%p") %></td>
                    <td><%= (submission.created_at).strftime("%a, %m/%d/%Y at %I:%M%p") %></td>
                    
                     <% if ( submission.created_at > Time.parse(assignment.due_date) ) %>
                        <td id="not_on_time">Late</td>
                     <% else %>
                        <td id="on_time">On time</td>
                    <% end %>
                  <td style="text-align:center"><%= link_to truncate(submission.name, :length => 20, :ommission => true), submission.attachment_url -%></td>
                  </tr>
                  <% end %>
                <% end %>
                
                
              <% end %>
          <% end %>
      <% end %>
    </table>
  
    <div style="text-align:center;">  
      <%= link_to 'Back', :back %> &emsp;
      <%= link_to 'Home', root_path %> 
    </div>
  
  </div>
<% end %>




<% if instructor_signed_in? or assistant_signed_in? %>
  <h1 style="text-align:center">View Student Submissions</h1>
<div id="subm-show-content">
  <table style = "width: 80%">
    <thead >
      <tr>
        <th>Course</th>
        <th>Student Name</th>
        <th>Student Email</th>
        <th>Assignment</th>
        <th>Due Date</th>
        <th>Submitted Date</th>
        <th>Status</th>
        <th>Submission</th>
      </tr>
    </thead>
  
    <% if (@submissions != nil) %>
        <tr>
           <% @courses.each do |course| %>
           
           <td id= "course_name_num"><%= course.name + (" ") + course.number.to_s %></td>
           <td id="remove_border_line"></td>
           <td id="remove_border_line"></td>
           <td id="remove_border_line"></td>
           <td id="remove_border_line"></td>
           <td id="remove_border_line"></td>
           <td id="remove_border_line"></td>
           <td id="remove_border_line"></td>
        </tr>
     
            <% course.assignments.each do |assignment| %>
             <% assignment.submissions.each do |submission| %>
            
                <tr>
                  <td id="remove_border_line"></td>

                  <td><%= submission.student.first_name %> <%= submission.student.last_name %> </td>
                  <td><%= submission.student.email %></td>

                  <td><%= assignment.name %></td>
                  <td><%= DateTime.parse(assignment.due_date).strftime("%a, %m/%d/%Y at %I:%M%p")%></td>
                  <td><%= submission.created_at.strftime("%a, %m/%d/%Y at %I:%M%p") %></td>
    
                   <% if ( submission.created_at > Time.parse(assignment.due_date) ) %>
                        <td id="not_on_time">Late</td>
                   <% else %>
                      <td id="on_time">On time</td>
                   <% end %>
    
                  <td style="text-align:center"><%= link_to truncate(submission.name, :length => 20, :ommission => true), submission.attachment_url -%></td>
                 
                </tr>
              <% end %>
            <% end %>
        <% end %>
    <% end %>
</table>

<div style="text-align:center;">  
  <%= link_to 'Back', :back %> &emsp;
  <%= link_to 'Home', root_path %> 
</div>
</div>
<% end %>
